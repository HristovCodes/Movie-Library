(this.webpackJsonpmovielibraryapp=this.webpackJsonpmovielibraryapp||[]).push([[0],{48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},53:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(6),r=n.n(c),o=n(33),a=n.n(o),i=(n(48),n(49),n(50),n(7));function s(){return Object(i.jsx)("section",{className:"Hero",children:Object(i.jsxs)("h1",{children:["My ",Object(i.jsx)("span",{children:"Movie"})," Collection"]})})}var u=n(11),l=n(0),d=n.n(l),j=n(2),v=n(14);n(53);function b(e){var t=e.setMovies,n=Object(c.useState)(""),r=Object(v.a)(n,2),o=r[0],a=r[1],s=Object(u.f)(),l=function(){var e=Object(j.a)(d.a.mark((function e(n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,fetch("https://api.tvmaze.com/search/shows?q=".concat(o));case 3:return c=e.sent,e.t0=t,e.next=7,c.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1),s.replace("/Movie-Library/Search/".concat(o));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("form",{className:"SearchForm","aria-label":"form",onSubmit:l,children:[Object(i.jsx)("input",{onChange:function(e){return a(e.target.value)},className:"search",placeholder:"Search by movie title...",type:"search"}),Object(i.jsx)("button",{className:"btnsubmit",type:"submit",children:"Search"})]})}var h=n(28),f=n(42),O=Object(f.a)({apiKey:"AIzaSyCZZ4c-gmeJEh9VE7M9loiUsHrL5eDp24A",authDomain:"movie-library-e5012.firebaseapp.com",databaseURL:"https://movie-library-e5012-default-rtdb.firebaseio.com",projectId:"movie-library-e5012",storageBucket:"movie-library-e5012.appspot.com",messagingSenderId:"987123764512",appId:"1:987123764512:web:b7bacf3e0eb2f85fce5b45"}),p=Object(h.c)(O);p.useDeviceLanguage();var m=new h.a;m.addScope("https://www.googleapis.com/auth/contacts.readonly"),Object(h.d)(p,h.b);var x=h.e,g=n(25),y=(n(61),n(31)),w=function(){return Object(y.b)()},M=y.c;function N(){var e=M((function(e){return e})),t=w(),n=function(e){t({type:"UPDATE_USER",payload:e})};Object(g.d)(p,(function(t){!e.authUser.uid&&t&&n(t)}));var c=function(){var e=Object(j.a)(d.a.mark((function e(){var t,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(p,m);case 2:t=e.sent,c=g.a.credentialFromResult(t),null===c||void 0===c?void 0:c.accessToken,r=t.user,n(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e.authUser.displayName?Object(i.jsx)("p",{onClick:function(){return Object(g.g)(p).then((function(){return n({})}))},className:"UserName",children:e.authUser.displayName}):Object(i.jsx)("button",{type:"button",onClick:function(){return c()},className:"SignIn",children:"Sign In"})}n(63);function U(e){var t=e.setMovies,n=Object(u.f)();return Object(i.jsxs)("nav",{className:"Nav",children:[Object(i.jsx)("h2",{onClick:function(){return n.replace("/Movie-Library/")},children:"My Movie Collection"}),Object(i.jsx)(b,{setMovies:t}),Object(i.jsx)(N,{})]})}n(64);var S=n.p+"static/media/placeholder.427cf3bd.png",C=n(19),k=Object(C.b)(O);function E(e,t){Object(C.g)(Object(C.e)(k,"".concat(e,"/")),t).catch((function(e){return console.log("".concat(e.code,"\n").concat(e.message))}))}function I(e){return L.apply(this,arguments)}function L(){return(L=Object(j.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)(Object(C.d)(Object(C.e)(k,"".concat(t,"/"))));case 2:if(!(n=e.sent).exists()){e.next=6;break}return c=n.val(),e.abrupt("return",c);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(66);function T(e){var t,n,c=e.score,r=e.show,o=M((function(e){return e})),a=Object(u.f)(),s=function(e,t){var n,c;e.stopPropagation(),c="user/".concat(o.authUser.uid,"/").concat(null===(n=t.show)||void 0===n?void 0:n.name),Object(C.f)(Object(C.e)(k,"".concat(c,"/"))).catch((function(e){return console.log("".concat(e.code,"\n").concat(e.message))}))},l=w();return Object(i.jsxs)("div",{onClick:function(){l({type:"UPDATE_MOVIES",payload:[{score:c,show:r}]}),a.replace("/Movie-Library/MovieInfo/".concat(null===r||void 0===r?void 0:r.name))},className:"Card",children:[Object(i.jsx)("img",{alt:null===r||void 0===r?void 0:r.name,src:(null===r||void 0===r||null===(t=r.image)||void 0===t?void 0:t.original)?null===r||void 0===r||null===(n=r.image)||void 0===n?void 0:n.original:S}),Object(i.jsx)("h3",{className:"Name",children:null===r||void 0===r?void 0:r.name}),Object(i.jsxs)("p",{children:["Category: ",Object(i.jsx)("span",{children:null===r||void 0===r?void 0:r.type})]}),Object(i.jsx)("a",{className:"Original",rel:"noreferrer",target:"_blank",href:null===r||void 0===r?void 0:r.url,onClick:function(e){return e.stopPropagation()},children:"Visit on TVMaze"}),Object(i.jsxs)("div",{className:"Overlay",children:[Object(i.jsx)("button",{onClick:function(e){return function(e,t){var n;e.stopPropagation(),E("user/".concat(o.authUser.uid,"/").concat(null===(n=t.show)||void 0===n?void 0:n.name),t)}(e,{score:c,show:r})},type:"button",children:Object(i.jsx)("span",{children:"\u2606"})}),Object(i.jsx)("button",{onClick:function(e){return s(e,{score:c,show:r})},type:"button",children:Object(i.jsx)("span",{children:"\u2296"})})]})]},null===r||void 0===r?void 0:r.id)}function D(e){var t=e.movies;return Object(i.jsxs)("section",{className:"Results",children:[Object(i.jsx)("h1",{className:"Heading",children:"Results:"}),t.map((function(e){return Object(i.jsx)(T,{score:e.score,show:e.show},e.show.id)}))]})}n(67);function P(){var e,t,n,r,o,a,s,u,l,d=M((function(e){return e})),j=Object(c.useState)(""),b=Object(v.a)(j,2),h=b[0],f=b[1],O=Object(c.useState)(""),p=Object(v.a)(O,2),m=p[0],x=p[1],g=M((function(e){return e.movies})),y=function(){var e;d.authUser.uid&&g[0]&&E("notes/".concat(d.authUser.uid,"/").concat(null===(e=g[0].show)||void 0===e?void 0:e.name,"/rating/"),{stars:h})};return Object(c.useEffect)((function(){var e;""===h&&g[0]&&d.authUser.uid&&I("notes/".concat(d.authUser.uid,"/").concat(null===(e=g[0].show)||void 0===e?void 0:e.name,"/rating/")).then((function(e){f(e.stars),x(e.review)}))})),g.length?Object(i.jsx)("div",{className:"MovieInfo",children:Object(i.jsxs)("article",{className:"Grid",children:[Object(i.jsx)("img",{alt:null===(e=g[0].show)||void 0===e?void 0:e.name,src:(null===(t=g[0].show)||void 0===t?void 0:t.image)?null===(n=g[0].show)||void 0===n||null===(r=n.image)||void 0===r?void 0:r.original:S}),Object(i.jsx)("h1",{className:"Heading",children:null===(o=g[0].show)||void 0===o?void 0:o.name}),Object(i.jsxs)("p",{className:"Genres",children:["Category: ",Object(i.jsx)("span",{children:null===(a=g[0].show)||void 0===a?void 0:a.type})]}),Object(i.jsx)("article",{dangerouslySetInnerHTML:{__html:"".concat((null===(s=g[0].show)||void 0===s?void 0:s.summary)?null===(u=g[0].show)||void 0===u?void 0:u.summary:"<p>No description avaliable.</p>")}}),Object(i.jsx)("a",{rel:"noreferrer",target:"_blank",href:null===(l=g[0].show)||void 0===l?void 0:l.url,children:"Visit on TVMaze"}),Object(i.jsxs)("div",{className:"Review",children:[Object(i.jsxs)("div",{className:"StarRatings ".concat(h),children:[Object(i.jsx)("span",{onClick:function(){return y()},onMouseOver:function(){return f("one")},children:"\u2605"}),Object(i.jsx)("span",{onClick:function(){return y()},onMouseOver:function(){return f("two")},children:"\u2605"}),Object(i.jsx)("span",{onClick:function(){return y()},onMouseOver:function(){return f("three")},children:"\u2605"}),Object(i.jsx)("span",{onClick:function(){return y()},onMouseOver:function(){return f("four")},children:"\u2605"}),Object(i.jsx)("span",{onClick:function(){return y()},onMouseOver:function(){return f("five")},children:"\u2605"})]}),Object(i.jsx)("textarea",{placeholder:m,onChange:function(e){return x(e.target.value)}}),Object(i.jsx)("button",{value:m,onClick:function(){y(),function(){var e;d.authUser.uid&&g[0]&&E("notes/".concat(d.authUser.uid,"/").concat(null===(e=g[0].show)||void 0===e?void 0:e.name,"/rating/"),{review:m})}()},type:"button",children:"Save note"})]})]})}):Object(i.jsx)("div",{})}n(68);function _(){var e=M((function(e){return e})),t=Object(c.useState)(),n=Object(v.a)(t,2),r=n[0],o=n[1];return Object(C.c)(Object(C.d)(Object(C.e)(k,"user/".concat(e.authUser.uid,"/"))),(function(e){if(e.exists()){var t=null===r||void 0===r?void 0:r.filter((function(t){var n;return(null===(n=t.show)||void 0===n?void 0:n.id)!==e.val().show.id}));t!==r&&o(t)}})),Object(c.useEffect)((function(){!r&&e.authUser.uid&&I("user/".concat(e.authUser.uid,"/")).then((function(e){o(Object.values(e))}))})),Object(i.jsxs)("section",{className:"Favourites",children:[Object(i.jsx)("h1",{className:"Heading",children:"Your Favourite Movies:"}),null===r||void 0===r?void 0:r.map((function(e){return Object(i.jsx)(T,{score:e.score,show:e.show},e.show.id)}))]})}var A=n(34);var F=function(){var e=M((function(e){return e})),t=w();return Object(i.jsxs)(A.a,{children:[Object(i.jsx)(U,{setMovies:function(e){t({type:"UPDATE_MOVIES",payload:e})}}),Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)(u.c,{children:[Object(i.jsxs)(u.a,{exact:!0,path:"/Movie-Library/",children:[Object(i.jsx)(s,{}),Object(i.jsx)(_,{})]}),Object(i.jsx)(u.a,{path:"/Movie-Library/Search/",children:Object(i.jsx)(D,{movies:e.movies})}),Object(i.jsx)(u.a,{path:"/Movie-Library/MovieInfo/",children:Object(i.jsx)(P,{})})]})})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))},V=n(71),H=n(32),z={movies:[],authUser:{}},B=Object(V.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MOVIES":return Object(H.a)(Object(H.a)({},e),{},{movies:t.payload});case"UPDATE_USER":return Object(H.a)(Object(H.a)({},e),{},{authUser:t.payload});default:return e}}));a.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(y.a,{store:B,children:Object(i.jsx)(F,{})})}),document.getElementById("root")),R()}},[[69,1,2]]]);
//# sourceMappingURL=main.c8bf2682.chunk.js.map